{
  "projectName": "ecommerce-api",
  "description": "API de e-commerce completa con gestión de usuarios, productos, órdenes y pagos",
  "domain": {
    "entities": [
      {
        "name": "User",
        "description": "Usuario del sistema con autenticación",
        "attributes": [
          "email: String",
          "password_hash: String",
          "name: String"
        ],
        "relationships": [
          {
            "entity": "Order",
            "type": "OneToMany"
          }
        ],
        "businessRules": [
          "Email debe ser único",
          "Password mínimo 8 caracteres"
        ]
      },
      {
        "name": "Product",
        "description": "Producto en el catálogo con inventario",
        "attributes": [
          "name: String",
          "price: Decimal",
          "stock: Integer",
          "category: String"
        ],
        "relationships": [
          {
            "entity": "OrderItem",
            "type": "OneToMany"
          }
        ],
        "businessRules": [
          "Precio debe ser positivo",
          "Stock no puede ser negativo"
        ]
      },
      {
        "name": "Order",
        "description": "Órden de compra con items y estado",
        "attributes": [
          "total: Decimal",
          "status: OrderStatus",
          "created_at: DateTime"
        ],
        "relationships": [
          {
            "entity": "User",
            "type": "ManyToOne"
          },
          {
            "entity": "OrderItem",
            "type": "OneToMany"
          }
        ],
        "businessRules": [
          "Total debe coincidir con suma de items",
          "Estado debe ser válido"
        ]
      },
      {
        "name": "OrderItem",
        "description": "Item individual dentro de una orden",
        "attributes": [
          "quantity: Integer",
          "unit_price: Decimal",
          "subtotal: Decimal"
        ],
        "relationships": [
          {
            "entity": "Order",
            "type": "ManyToOne"
          },
          {
            "entity": "Product",
            "type": "ManyToOne"
          }
        ],
        "businessRules": [
          "Subtotal = quantity * unit_price",
          "Quantity > 0"
        ]
      }
    ],
    "useCases": [
      {
        "name": "CreateUser",
        "description": "Registrar nuevo usuario en el sistema",
        "actor": "User",
        "inputs": [
          "email: String",
          "password: String",
          "name: String"
        ],
        "outputs": [
          "user_id: UUID"
        ],
        "businessLogic": [
          "Validar formato email",
          "Hash password con bcrypt",
          "Verificar email único",
          "Crear usuario en DB"
        ]
      },
      {
        "name": "AddProduct",
        "description": "Agregar producto al catálogo",
        "actor": "Admin",
        "inputs": [
          "name: String",
          "price: Decimal",
          "stock: Integer",
          "category: String"
        ],
        "outputs": [
          "product_id: UUID"
        ],
        "businessLogic": [
          "Validar precio > 0",
          "Validar stock >= 0",
          "Crear producto",
          "Notificar disponibilidad"
        ]
      },
      {
        "name": "PlaceOrder",
        "description": "Crear órden de compra con items",
        "actor": "User",
        "inputs": [
          "user_id: UUID",
          "items: Array<{product_id: UUID, quantity: Integer}>"
        ],
        "outputs": [
          "order_id: UUID",
          "total: Decimal"
        ],
        "businessLogic": [
          "Validar stock disponible",
          "Calcular precios actuales",
          "Reservar stock",
          "Calcular total",
          "Procesar pago",
          "Crear órden"
        ]
      },
      {
        "name": "ProcessPayment",
        "description": "Procesar pago con Stripe",
        "actor": "System",
        "inputs": [
          "order_id: UUID",
          "payment_method: String"
        ],
        "outputs": [
          "payment_status: PaymentStatus"
        ],
        "businessLogic": [
          "Validar datos pago",
          "Llamar API Stripe",
          "Actualizar estado orden",
          "Enviar confirmación"
        ]
      }
    ],
    "businessRules": [
      {
        "name": "StockValidation",
        "description": "Stock no puede ser negativo después de venta",
        "applies_to": [
          "Product",
          "OrderItem"
        ],
        "condition": "product.stock >= order_item.quantity",
        "action": "Rechazar venta si stock insuficiente"
      },
      {
        "name": "EmailUniqueness",
        "description": "Email debe ser único por usuario",
        "applies_to": [
          "User"
        ],
        "condition": "users.filter(u => u.email == new_email).length == 0",
        "action": "Rechazar registro con email duplicado"
      },
      {
        "name": "OrderTotalIntegrity",
        "description": "Total orden debe coincidir con suma de items",
        "applies_to": [
          "Order"
        ],
        "condition": "order.total == sum(order.items.map(i => i.subtotal))",
        "action": "Recalcular total antes de procesar"
      }
    ],
    "integrations": [
      {
        "name": "PostgreSQL",
        "type": "database",
        "description": "Base de datos principal para persistencia",
        "operations": [
          "CRUD",
          "transactions",
          "queries"
        ]
      },
      {
        "name": "Redis",
        "type": "cache",
        "description": "Cache para sesiones y datos temporales",
        "operations": [
          "set",
          "get",
          "expire",
          "publish"
        ]
      },
      {
        "name": "Stripe",
        "type": "payment",
        "description": "Procesamiento de pagos y subscripciones",
        "operations": [
          "charge",
          "refund",
          "webhook"
        ]
      }
    ]
  },
  "technical": {
    "architecture_type": "api",
    "data_persistence": "postgresql",
    "auth_required": true,
    "real_time": false,
    "scalability_requirements": "medium",
    "performance_requirements": "high"
  },
  "metadata": {
    "generatedAt": "2025-08-24T13:45:13.411Z",
    "originalDescription": "API de e-commerce completa con usuarios, productos, órdenes, pagos Stripe, inventario tiempo real",
    "requestedIntegrations": [
      "postgresql",
      "redis",
      "stripe"
    ],
    "targetLanguage": "rust",
    "analyzedBy": "BRIK Domain Analyzer v1.0",
    "confidence": 1
  }
}